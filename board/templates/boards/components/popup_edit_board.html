{# board/templates/boards/components/popup_edit_board.html #}
<div
  x-cloak
  x-show="openEdit"
  x-transition.opacity
  class="fixed inset-0 bg-black/40 flex items-center justify-center z-50"
>
  <div
    @click.outside="openEdit = false"
    class="bg-white rounded-xl shadow-xl border-[6px] border-[#0094FF] w-full max-w-md"
  >
    <div class="bg-[#0094FF] text-white text-center py-2 rounded-t-lg">
      <h2 class="font-bold text-lg">แก้ไข Project</h2>
    </div>

    <div class="p-6 space-y-4">
      <div class="w-full mb-2">
        <p class="text-xs text-gray-600 mb-1">ตัวอย่างรูปปก</p>
        <div
          class="w-full h-32 rounded-md border border-dashed border-gray-300 flex items-center justify-center bg-gray-50 overflow-hidden"
        >
          {# ✅ ใช้ editCoverPreview (ไม่มี Board) #}
          <template x-if="editCoverPreview">
            <img :src="editCoverPreview" class="w-full h-full object-cover" />
          </template>
          <template x-if="!editCoverPreview">
            <span class="text-xs text-gray-400">ยังไม่มีรูปปก</span>
          </template>
        </div>
      </div>

      {# ✅ ใช้ editActionUrl (ไม่มี Board) #}
      <form
        method="post"
        enctype="multipart/form-data"
        class="space-y-4"
        :action="editActionUrl"
      >
        {% csrf_token %}

        <div>
          <label class="block text-sm font-semibold mb-1">
            อัปโหลดรูปปกใหม่ (ถ้าต้องการ)
          </label>
          <input
            type="file"
            name="cover_image"
            accept="image/*"
            class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[#0094FF]"
            @change="if ($event.target.files[0]) { editCoverPreview = URL.createObjectURL($event.target.files[0]) }"
          />
        </div>

        <div>
          <label class="block text-sm font-semibold mb-1">ชื่อ Project</label>
          {# ✅ ใช้ editName (ไม่มี Board) #}
          <input
            type="text"
            name="name"
            x-model="editName"
            class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[#0094FF]"
            required
          />
        </div>
        
        <div>
          <label class="block text-sm font-semibold mb-1">Discord Webhook URL</label>
          <input
            type="url"
            name="discord_webhook_url"
            x-model="editDiscordUrl" 
            class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[#0094FF]"
            placeholder="https://discord.com/api/webhooks/..."
          />
          <p class="text-xs text-gray-500 mt-1">
            แก้ไขลิงก์ Webhook เพื่อรับการแจ้งเตือน
          </p>
        </div>

        <div class="flex justify-end gap-3 pt-2">
          <button
            type="button"
            @click="openEdit = false"
            class="px-4 py-1.5 rounded-full border border-gray-400 text-gray-700 text-sm"
          >
            ยกเลิก
          </button>

          <button
            type="submit"
            class="px-6 py-1.5 rounded-full bg-[#0094FF] text-white text-sm font-semibold"
          >
            บันทึก
          </button>
        </div>
      </form>
    </div>
  </div>
</div>