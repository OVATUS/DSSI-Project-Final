{% extends "base.html" %}

{% block content %}
<div x-data="projectPage()" class="relative p-4">

  <div class="flex justify-center mt-4">
    <form method="get" action="{% url 'project_page' %}" class="w-full max-w-2xl relative">
      
      <input
        type="text"
        name="q" 
        value="{{ search_query|default_if_none:'' }}" 
        placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå..."
        class="w-full py-2 pl-10 pr-4 rounded-full bg-gray-200 outline-none focus:ring-2 focus:ring-blue-400 transition-all"
        autocomplete="off"
      />
      
      <button type="submit" class="absolute left-3 top-2.5 text-gray-500 hover:text-blue-600 cursor-pointer bg-transparent border-none p-0">
         üîç 
      </button>

    </form>
  </div>

  <!-- Favorite Projects -->
  <div class="mt-8">
    <h2 class="text-lg font-semibold">Project ‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏î‡∏≤‡∏ß ‚≠ê</h2>
    <hr class="border-gray-400 mt-2" />

    {% if starred_boards %}
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mt-4">
        {% for board in starred_boards %}
          <div
            class="bg-blue-600 text-white rounded-md p-3 cursor-pointer hover:opacity-90 transition"
          >
            <h3 class="font-bold text-sm">{{ board.name }}</h3>
            <p class="text-xs opacity-80 mt-1">
              {{ board.description|default:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢" }}
            </p>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-sm text-gray-500 mt-3">‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏î‡∏≤‡∏ß</p>
    {% endif %}
  </div>

  <!-- My Project -->
  <div class="mt-10">
    <h2 class="text-lg font-semibold">My Project</h2>
    <hr class="border-gray-400 mt-2" />

    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-6">
      {% for board in boards %}
        {% include "boards/components/board_card.html" with board=board %}
      {% endfor %}

      <!-- ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå -->
      <button
        type="button"
        @click="openCreate = true"
        class="flex flex-col items-center justify-center bg-gray-200 border border-gray-400 rounded-md h-32 hover:bg-gray-300 transition w-full"
      >
        <div class="text-3xl font-bold text-gray-700">+</div>
        <div class="text-gray-700 text-sm mt-1">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏á‡∏≤‡∏ô</div>
      </button>
    </div>
  </div>

  {# popup ‡∏ï‡πà‡∏≤‡∏á ‡πÜ ‡∏ñ‡∏π‡∏Å‡πÅ‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å #}
  {% include "boards/components/popup_create_board.html" %}
  {% include "boards/components/popup_edit_board.html" %}
  {% include "boards/components/popup_delete_board.html" %}

</div>
{% endblock %}
