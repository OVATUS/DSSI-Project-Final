{# templates/boards/board_detail.html #}
{% extends "base.html" %}

{% block sidebar %}{% endblock %}

{% block content %}

{# 1Ô∏è‚É£ Wrapper ‡∏ô‡∏≠‡∏Å‡∏™‡∏∏‡∏î: ‡∏ñ‡∏∑‡∏≠ x-data (‡∏´‡πâ‡∏≤‡∏°‡∏°‡∏µ style ‡∏ï‡∏±‡∏î‡∏Ç‡∏≠‡∏ö) #}
<div
  x-data="boardDetailPage({
    moveUrl: '{% url 'task_move' %}',
    listMoveUrl: '{% url 'list_reorder' board.id %}',
    taskIsArchived: false,
    taskId: null,

    activityDrawerOpen: false,
    activities: [],
    isLoadingActivities: false
  })"
>

  {# 2Ô∏è‚É£ Layout ‡∏ä‡∏±‡πâ‡∏ô‡πÉ‡∏ô: ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ö‡∏≠‡∏£‡πå‡∏î (‡πÉ‡∏™‡πà Fixed & Overflow ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ) #}
  <div class="fixed inset-0 top-14 w-full h-[calc(100vh-3.5rem)] flex flex-col bg-gradient-to-br from-slate-50 to-slate-200 overflow-hidden">
  
      {# --- STYLE Scrollbar --- #}
      <style>
        .board-scroll::-webkit-scrollbar { height: 12px; }
        .board-scroll::-webkit-scrollbar-track { background: rgba(0,0,0,0.05); border-radius: 10px; }
        .board-scroll::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.2); border-radius: 10px; border: 3px solid transparent; background-clip: content-box; }
        .board-scroll::-webkit-scrollbar-thumb:hover { background-color: rgba(0,0,0,0.3); }
      </style>

      {# --- HEADER --- #}
      <header class="h-16 shrink-0 bg-white/80 backdrop-blur-md border-b border-gray-200 flex items-center justify-between px-4 sm:px-6 shadow-sm z-30 w-full relative">
        {# ... (‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ Header ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) ... #}
        <div class="flex items-center gap-3 sm:gap-4 min-w-0 mr-4">
           <div class="bg-indigo-600 text-white p-2 rounded-lg shadow-sm shrink-0 hidden sm:block"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z" /></svg></div>
           <h1 class="text-lg sm:text-xl font-bold text-gray-800 tracking-tight truncate max-w-[150px] sm:max-w-xs">{{ board.name }}</h1>
           <button type="button" x-data="{ starred: {% if request.user in board.starred_by.all %}true{% else %}false{% endif %} }" @click="fetch('{% url 'board_star' board.id %}', { method: 'POST', headers: { 'X-CSRFToken': '{{ csrf_token }}' } }).then(res => res.json()).then(data => { starred = data.is_starred; })" class="p-1.5 rounded-full transition-colors border border-transparent hover:bg-gray-100 focus:outline-none" :class="starred ? 'text-yellow-400' : 'text-gray-300 hover:text-yellow-400'" title="‡∏ï‡∏¥‡∏î‡∏î‡∏≤‡∏ß‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏ô‡∏µ‡πâ"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" :fill="starred ? 'currentColor' : 'none'" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" /></svg></button>
        </div>

        <div class="flex items-center gap-2 sm:gap-3 ml-auto">
            {# ... (‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏ß‡∏≤‡∏Ç‡∏≠‡∏á Header ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) ... #}
            <div class="hidden lg:flex items-center -space-x-2 mr-2 border-r border-gray-200 pr-4">
                {% for member in board.members.all|slice:":5" %}
                <div class="w-8 h-8 rounded-full border-2 border-white overflow-hidden bg-gray-200" title="{{ member.username }}">
                    {% if member.profile_image %}<img src="{{ member.profile_image.url }}" class="w-full h-full object-cover">{% else %}<div class="w-full h-full bg-indigo-400 flex items-center justify-center text-white text-xs font-bold">{{ member.username.0|upper }}</div>{% endif %}
                </div>
                {% endfor %}
                <button @click="addMemberOpen = true" class="w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-500 border-2 border-white flex items-center justify-center text-xs font-bold transition">+</button>
            </div>

            <div class="flex items-center gap-2 bg-gray-50 p-1 rounded-full border border-gray-200">
                <div class="relative group">
                    <span class="absolute inset-y-0 left-0 pl-2.5 flex items-center pointer-events-none text-gray-400 group-focus-within:text-indigo-500"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg></span>
                    <input type="text" x-model="searchQuery" class="pl-8 pr-8 py-1.5 text-xs sm:text-sm border-none bg-transparent rounded-full focus:ring-0 w-24 sm:w-32 md:w-48 transition-all focus:w-40 sm:focus:w-56 placeholder-gray-400" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...">
                    <button x-show="searchQuery" @click="searchQuery = ''" class="absolute inset-y-0 right-0 pr-2 flex items-center text-gray-400 hover:text-red-500 cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" /></svg></button>
                </div>
                <div class="hidden sm:block border-l border-gray-200 pl-2">
                    <select x-model="filterMember" class="text-xs border-none bg-transparent py-1 pl-1 pr-6 text-gray-600 focus:ring-0 cursor-pointer hover:text-indigo-600 max-w-[100px] truncate"><option value="">‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å: ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>{% for member in board.members.all %}<option value="{{ member.id }}">{{ member.username }}</option>{% endfor %}{% if board.created_by not in board.members.all %}<option value="{{ board.created_by.id }}">{{ board.created_by.username }}</option>{% endif %}</select>
                </div>
                <div class="hidden md:block border-l border-gray-200 pl-2">
                    <select x-model="filterLabel" class="text-xs border-none bg-transparent py-1 pl-1 pr-6 text-gray-600 focus:ring-0 cursor-pointer hover:text-indigo-600 max-w-[100px] truncate"><option value="">‡∏õ‡πâ‡∏≤‡∏¢: ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>{% for label in board.labels.all %}<option value="{{ label.id }}">{{ label.name }}</option>{% endfor %}</select>
                </div>
                <button x-show="filterMember || filterLabel" @click="filterMember = ''; filterLabel = ''" class="hidden sm:flex px-2 text-xs text-red-500 hover:text-red-700 font-bold" title="‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á">‚úï</button>
            </div>

            <div class="relative">
                <button @click="menuOpen = !menuOpen" class="flex items-center justify-center w-9 h-9 rounded-full bg-gray-100 hover:bg-indigo-50 text-gray-600 hover:text-indigo-600 transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500/50"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" /></svg></button>
                <div x-show="menuOpen" @click.away="menuOpen = false" x-transition:enter="transition ease-out duration-100" x-transition:enter-start="transform opacity-0 scale-95" x-transition:enter-end="transform opacity-100 scale-100" x-transition:leave="transition ease-in duration-75" x-transition:leave-start="transform opacity-100 scale-100" x-transition:leave-end="transform opacity-0 scale-95" class="absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-xl border border-gray-100 py-2 z-50 origin-top-right divide-y divide-gray-100" style="display: none;">
                    <div class="py-1">
                        <button @click="addMemberOpen = true; menuOpen = false" class="w-full text-left px-4 py-2.5 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-700 flex items-center gap-3"><span class="flex items-center justify-center w-5 h-5 bg-indigo-100 text-indigo-600 rounded-full text-xs font-bold">+</span> ‡πÄ‡∏ä‡∏¥‡∏ç‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
                        <div class="sm:hidden px-4 py-2"><div class="text-xs text-gray-400 mb-1">‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å:</div><select x-model="filterMember" class="w-full text-sm border-gray-200 rounded p-1 bg-gray-50"><option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>{% for member in board.members.all %}<option value="{{ member.id }}">{{ member.username }}</option>{% endfor %}</select></div>
                    </div>
                    <div class="py-1">
                        <button @click="loadArchivedTasks({{ board.id }}); menuOpen = false" class="w-full text-left px-4 py-2.5 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-700 flex items-center gap-3"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4" /></svg> ‡∏Ñ‡∏•‡∏±‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö (Archived)</button>
                        <button @click="activityDrawerOpen = true; menuOpen = false; loadActivities({{ board.id }}); /* 3. ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡πÑ‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• *" class="w-full text-left px-4 py-2.5 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-700 flex items-center gap-3"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg> ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</button>
                    </div>
                </div>
            </div>
        </div>
      </header>

      {# --- SCROLLABLE LIST AREA --- #}
      <main class="flex-1 overflow-x-auto overflow-y-hidden board-scroll w-full">
        <div class="h-full flex items-start gap-6 px-6 py-6 min-w-max">
           
           {% for lst in lists %}
             {# ... (‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ List ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) ... #}
             <div class="flex flex-col w-80 max-h-full bg-gray-100/90 rounded-xl shadow-sm border border-gray-200/60 shrink-0" @dragover.prevent @drop="onDrop($event, {{ lst.id }})">
                <div class="p-3 pl-4 flex items-center justify-between cursor-move group" draggable="true" @dragstart="onDragStartList($event, {{ lst.id }})">
                    <h2 class="font-bold text-gray-700 text-sm truncate uppercase tracking-wide">{{ lst.title }}</h2>
                    <div class="relative">
                        <button class="text-gray-400 hover:text-gray-700 p-1 rounded hover:bg-gray-200 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z" /></svg></button>
                        <div class="absolute right-0 top-full mt-1 w-32 bg-white rounded-md shadow-xl border border-gray-100 z-20 hidden group-hover:block">
                            <button type="button" class="w-full text-left px-4 py-2 text-xs text-gray-700 hover:bg-gray-50 flex items-center gap-2" @click="listModalMode = 'edit'; listTitle = '{{ lst.title|escapejs }}'; listActionUrl = '{% url "list_update" lst.id %}'; listModalOpen = true;">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠</button>
                            <button type="button" class="w-full text-left px-4 py-2 text-xs text-red-600 hover:bg-red-50 flex items-center gap-2 rounded-b-md" @click="listDeleteActionUrl = '{% url "list_delete" lst.id %}'; listDeleteOpen = true;">‡∏•‡∏ö‡∏•‡∏¥‡∏™‡∏ï‡πå</button>
                        </div>
                    </div>
                </div>

                <div class="flex-1 overflow-y-auto px-2 pb-2 space-y-2 min-h-[50px] custom-scrollbar task-container" @dragover="onDragOver($event)" @drop="onDrop($event, {{ lst.id }})">
                    {% for task in lst.tasks.all %}
                    <div class="transform transition hover:-translate-y-1 duration-200 cursor-pointer" draggable="true" data-task-id="{{ task.id }}" data-assigned-id="{{ task.assigned_to.id|default:'unassigned' }}" x-show="!filterMember || filterMember == $el.dataset.assignedId" @dragstart="onDragStartTask($event, {{ task.id }})" @dragend="onDragEndTask($event)" 
                         @click="taskMode = 'edit'; taskModalOpen = true; taskId = {{ task.id }}; taskListTitle = '{{ lst.title|escapejs }}'; taskActionUrl = '{% url 'task_update' task.id %}'; taskTitle = '{{ task.title|escapejs }}'; taskDescription = '{{ task.description|escapejs }}'; taskAssignedTo = '{{ task.assigned_to.id|default_if_none:'' }}'; taskPriority = '{{ task.priority }}'; taskDueDate = '{{ task.due_date|date:'Y-m-d\TH:i' }}'; taskLabels = [{% for label in task.labels.all %}{{ label.id }}{% if not forloop.last %},{% endif %}{% endfor %}]; checklistItems = [{% for item in task.checklist_items.all %}{ id: {{ item.id }}, content: '{{ item.content|escapejs }}', is_completed: {% if item.is_completed %}true{% else %}false{% endif %} },{% endfor %}]; attachmentItems = [{% for att in task.attachments.all %}{ id: {{ att.id }}, filename: '{{ att.filename|escapejs }}', url: '{{ att.file.url|escapejs }}', is_image: {% if att.is_image %}true{% else %}false{% endif %}, uploaded_at: '{{ att.uploaded_at|date:"d/m/Y H:i" }}' },{% endfor %}];">
                        {% include "boards/components/task_card.html" with task=task lst=lst %}
                    </div>
                    {% endfor %}
                </div>

                <div class="p-2 pt-1">
                    <button type="button" class="w-full flex items-center gap-2 text-gray-500 hover:text-gray-800 hover:bg-gray-200/80 rounded-md px-3 py-2 text-sm transition-colors text-left" @click="taskMode = 'create'; taskModalOpen = true; taskListTitle = '{{ lst.title|escapejs }}'; taskActionUrl = '{% url 'task_create' lst.id %}'; taskTitle = ''; taskDescription = ''; taskAssignedTo = ''; taskPriority = 'medium'; taskDueDate = ''; taskLabels = [];">
                    <span class="text-lg leading-none">+</span> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πå‡∏î
                    </button>
                </div>
             </div>
           {% endfor %}
           
           <button type="button" class="shrink-0 w-80 h-12 bg-white/40 hover:bg-white/60 border border-dashed border-gray-400/50 rounded-xl flex items-center justify-center gap-2 text-gray-600 font-medium transition-all" @click="listModalMode = 'create'; listTitle = ''; listActionUrl = '{% url "list_create" board.id %}'; listModalOpen = true;">
            + ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏¥‡∏™‡∏ï‡πå‡∏≠‡∏µ‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
           </button>
        </div>
      </main>

  </div> {# üî¥ ‡∏õ‡∏¥‡∏î div ‡∏ä‡∏±‡πâ‡∏ô‡πÉ‡∏ô‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ (‡∏à‡∏∏‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î!) #}

  {# 3Ô∏è‚É£ ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¥‡∏™‡∏£‡∏∞ (Drawers & Modals) - ‡∏ß‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÇ‡∏î‡∏ô‡∏ï‡∏±‡∏î‡∏Ç‡∏≠‡∏ö #}
  {% include "boards/components/popup_list_form.html" %}
  {% include "boards/components/popup_list_delete.html" %}
  {% include "boards/components/popup_add_member.html" %}
  {% include "boards/components/archive_drawer.html" %}
  {% include "boards/components/popup_task_form.html" %}
  
  {# Activity Drawer (‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á UI ‡πÉ‡∏´‡πâ‡∏ô‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏Ç‡∏∂‡πâ‡∏ô) #}
  <div x-cloak x-show="activityDrawerOpen" class="fixed inset-0 z-50 overflow-hidden" role="dialog" aria-modal="true">
    <div x-show="activityDrawerOpen" x-transition:enter="ease-in-out duration-500" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="ease-in-out duration-500" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" class="absolute inset-0 bg-gray-500 bg-opacity-75 transition-opacity" @click="activityDrawerOpen = false"></div>
    <div class="fixed inset-y-0 right-0 pl-10 max-w-full flex">
        <div x-show="activityDrawerOpen" x-transition:enter="transform transition ease-in-out duration-500" x-transition:enter-start="translate-x-full" x-transition:enter-end="translate-x-0" x-transition:leave="transform transition ease-in-out duration-500" x-transition:leave-start="translate-x-0" x-transition:leave-end="translate-x-full" class="w-screen max-w-md">
            <div class="h-full flex flex-col bg-white shadow-xl overflow-hidden">
                {# Header #}
                <div class="px-4 py-4 bg-gray-50 border-b border-gray-200 flex justify-between items-center shadow-sm z-10">
                    <h2 class="text-lg font-bold text-gray-800 flex items-center gap-2">
                        <span class="bg-indigo-100 text-indigo-600 p-1.5 rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg></span>
                        ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°
                    </h2>
                    <button @click="activityDrawerOpen = false" class="text-gray-400 hover:text-gray-600 bg-white hover:bg-gray-100 p-1.5 rounded-full transition-colors shadow-sm border border-gray-200"><svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg></button>
                </div>
                
                {# List Body (Timeline Style) #}
                <div class="relative flex-1 overflow-y-auto bg-white p-0">
                    <div x-show="isLoadingActivities" class="flex flex-col items-center justify-center h-40 text-gray-400 gap-2">
                        <svg class="animate-spin h-6 w-6 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                        <span class="text-xs">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</span>
                    </div>
                    
                    <div x-show="!isLoadingActivities && activities.length === 0" class="flex flex-col items-center justify-center h-64 text-gray-400 gap-3">
                        <div class="bg-gray-50 p-4 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg></div>
                        <span class="text-sm">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÜ ‡∏ô‡∏µ‡πâ</span>
                    </div>

                    <ul class="relative" x-show="!isLoadingActivities && activities.length > 0">
                        <template x-for="(act, index) in activities" :key="index">
                            <li class="relative pl-6 pr-4 py-4 hover:bg-gray-50 transition-colors border-b border-gray-50 last:border-0 group">
                                {# ‡πÄ‡∏™‡πâ‡∏ô Timeline #}
                                <div class="absolute left-0 top-0 bottom-0 w-1 bg-gray-100 group-hover:bg-indigo-200 transition-colors"></div>
                                
                                <div class="flex gap-3 items-start">
                                    {# Avatar #}
                                    <div class="shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-xs font-bold shadow-sm ring-2 ring-white z-10" x-text="act.actor_initial"></div>
                                    
                                    <div class="flex-1 min-w-0">
                                        <p class="text-sm text-gray-800 leading-snug">
                                            <span class="font-bold text-gray-900" x-text="act.actor"></span>
                                            <span class="text-gray-600" x-text="act.action"></span>
                                        </p>
                                        <p class="text-[11px] text-gray-400 mt-1 flex items-center gap-1">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                                            <span x-text="act.created_at"></span>
                                        </p>
                                    </div>
                                </div>
                            </li>
                        </template>
                    </ul>
                </div>
            </div>
        </div>
    </div>
  </div>

</div> {# üü¢ ‡∏õ‡∏¥‡∏î Wrapper ‡∏ô‡∏≠‡∏Å‡∏™‡∏∏‡∏î #}
{% endblock %}